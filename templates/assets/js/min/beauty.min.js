(function(){(function(){"use strict";let e=function(t){if(!(this instanceof e))return new e(t);this.options=Object.assign({},{followMode:!1,followTheme:!1,titlePrint:!1,titlePrintInterval:300,titleTiktok:!1,titleText:`来自小莫唐尼的Joe首页大图`,titleColor:`#ffffff`,titleShadow:`-3px 2px 6px #1c1f21`,hitokotoParams:{},hitokotoApi:`https://v1.hitokoto.cn`,hitokotoColor:`#ffffff`,hitokotoEnable:!0},t),this.init()};e.prototype={dom:{bigBanner:null,waves:null,bannerTitle:null,bannerSubTitle:null,hitokotoText:null,hitokotoForm:null},_timer:{printText:null},fnGetDom(){this.dom.bigBanner=$(`#EvanBigBanner`),this.dom.waves=$(`#EvanWaves`),this.dom.bannerTitle=$(`#EvanBigBanner_Title`),this.dom.bannerSubTitle=$(`#EvanBigBanner_SubTitle`),this.dom.hitokotoText=$(`#HitokotoText`),this.dom.hitokotoForm=$(`#HitokotoForm`)},fnSetStyle(){this.dom.waves.find(`.parallax use`).removeAttr(`fill`),this.dom.bannerTitle.css({color:this.options.titleColor,textShadow:this.options.titleShadow}),this.options.titleTiktok&&this.dom.bannerTitle.addClass(`evan-tiktok-text`),this.dom.hitokotoText.css({color:this.options.hitokotoColor}),this.dom.hitokotoForm.css({color:this.options.hitokotoColor}),this.options.followMode&&(this.options.wavesColor||this.dom.waves.css(`fill`,`var(--background)`)),this.options.followTheme&&(this.options.wavesColor||this.dom.waves.css(`fill`,`var(--theme)`),this.options.titleTiktok||this.dom.bannerTitle.css(`color`,`var(--theme)`))},fnPrintText(){let e=this;if(e.options.titleTiktok)return;let t=``,n=``;t=e.options.titleText?e.options.titleText:e.dom.bannerTitle.text();let r=0,i=()=>{e._timer.printText=setTimeout(()=>{n.length<t.length?(n+=t[r++],e.dom.bannerTitle.html(``+n+`_`),i()):(clearTimeout(e._timer.printText),e.dom.bannerTitle.html(n+`<span id="EvanBigBannerLastTitleTip">_</span>`),o())},e.options.titlePrintInterval)};i();let a=!0,o=()=>{setTimeout(()=>{a?$(`#EvanBigBannerLastTitleTip`).css({visibility:`hidden`}):$(`#EvanBigBannerLastTitleTip`).css({visibility:`visible`}),a=!a,o()},e.options.titlePrintInterval)}},fnGetHitokoto(){var e=this,t=function(t){$.get(e.options.hitokotoApi,e.options.hitokotoParams,function(n){e.dom.hitokotoText.fadeIn(1500).html(n.hitokoto),e.dom.hitokotoForm.fadeIn(1500).html(`「&nbsp;`+n.from+`&nbsp;」`),typeof t==`function`&&t()})};if(e.options.hitokotoEnable){clearTimeout(e.timer);var n=function(){e.timer=setTimeout(function(){e.dom.hitokotoText.fadeOut(1500),e.dom.hitokotoForm.fadeOut(1500),setTimeout(function(){t(function(){n()})},1100)},6e3)};t(),n()}},init(){var e=this;$(function(){e.fnGetDom(),e.fnGetHitokoto(),e.fnPrintText(),e.fnSetStyle(),e.options.titleText?e.dom.bannerTitle.text(e.options.titleText):e.dom.bannerSubTitle.css(`opacity`,1)})}},window.EvanBigBanner=e})()})();